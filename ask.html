<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ask</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        .ask-form {
            max-width: 600px;
            margin-top: 2em;
        }

        .ask-form label {
            display: block;
            margin: 0.5em 0 0.2em;
            font-weight: bold;
        }

        .ask-form input[type="text"],
        .ask-form textarea {
            width: 100%;
            padding: 0.5em;
            font-size: 1em;
            margin-bottom: 1em;
            border: 1px solid #aaa;
            border-radius: 4px;
        }

        .ask-form button {
            padding: 0.5em 1em;
            font-size: 1em;
            cursor: pointer;
        }

        .submission-message {
            margin-top: 1em;
            font-weight: bold;
            color: green;
        }

        header h1 {
            font-weight: bold;
            text-decoration: underline;
        }
    </style>
</head>
<body>

<header>
    <h1>mary <span>in</span> <span>the</span> real <span>world</span></h1>
    <nav>
        <a href="index.html">home</a>
        <a href="ask.html">ask</a>
        <a href="about.html">about</a>
    </nav>
</header>

<main>
    <h2>ask</h2>

    <form id="askForm" class="ask-form">
        <label>Your name (optional):</label>
        <input type="text" name="name" placeholder="anonymous">

        <label>Your question:</label>
        <textarea name="question" required placeholder="Write something"></textarea>

        <button type="submit">send</button>

        <p id="submissionMessage" class="submission-message" style="display: none;">
            Submission Complete
        </p>
    </form>
</main>

<script>
    const form = document.getElementById('askForm');
    const message = document.getElementById('submissionMessage');

    form.addEventListener('submit', async function(e) {
        e.preventDefault(); // prevent default form submission

        const formData = new FormData(form);

        // default name if empty
        if (!formData.get('name')) {
            formData.set('name', 'anonymous');
        }

        // format message as: "(name) asks: question"
        const payload = new FormData();
        payload.append('message', `(${formData.get('name')}) asks: ${formData.get('question')}`);
        payload.append('_captcha', 'false');

        // send to FormSubmit
        const response = await fetch('https://formsubmit.co/maryinrealworld@gmail.com', {
            method: 'POST',
            body: payload
        });

        if (response.ok) {
            message.style.display = 'block';
            form.reset();
        } else {
            alert('There was a problem submitting your question. Please try again.');
        }
    });
</script>

</body>
</html>
